C51 COMPILER V9.01   MAIN                                                                  12/09/2015 10:42:47 PAGE 1   


C51 COMPILER V9.01, COMPILATION OF MODULE MAIN
OBJECT MODULE PLACED IN main.OBJ
COMPILER INVOKED BY: C:\Keil\C51\BIN\C51.EXE main.c BROWSE DEBUG OBJECTEXTEND

line level    source

   1          /*******************************************************************************
   2          * 实验名                           : 定时器实验
   3          * 使用的IO           : 
   4          * 实验效果       :LED每隔500ms左移一次
   5          *       注意                                     ：
   6          *******************************************************************************/
   7          #include<reg51.h>       
   8          #include<intrins.h>
   9          #define GPIO_LED P2
  10          
  11          void TimerConfiguration();
  12          unsigned char Time;
  13          /*******************************************************************************
  14          * 函数名         : main
  15          * 函数功能                 : 主函数
  16          * 输入           : 无
  17          * 输出           : 无
  18          *******************************************************************************/
  19          void main(void)
  20          {
  21   1              Time=0;
  22   1              GPIO_LED=0XFE;
  23   1              TimerConfiguration();
  24   1              while(1)
  25   1              {
  26   2                      if(Time==10)
  27   2                      {
  28   3                              GPIO_LED=_crol_(GPIO_LED,1);
  29   3                              Time=0;
  30   3                      }
  31   2      
  32   2              }                               
  33   1      }
  34          
  35          /*******************************************************************************
  36          * 函数名         : TimerConfiguration()
  37          * 函数功能                 : 配置定时器值
  38          * 输入           : 无
  39          * 输出           : 无
  40          *******************************************************************************/                   
  41          
  42          void TimerConfiguration()
  43          {
  44   1          TMOD = 0x01; //选择工作方式1
  45   1          TH0 = 0x3C;  //设置初始值,定时50MS
  46   1          TL0 = 0xB0; 
  47   1          EA = 1;                      //打开总中断
  48   1          ET0 = 1;             //打开定时器0中断
  49   1          TR0 = 1;             //启动定时器0
  50   1      }
  51          /*******************************************************************************
  52          * 函数名         : Timer0()
  53          * 函数功能                 : 定时器0中断函数
  54          * 输入           : 无
  55          * 输出           : 无
C51 COMPILER V9.01   MAIN                                                                  12/09/2015 10:42:47 PAGE 2   

  56          *******************************************************************************/                   
  57          
  58          void Timer0() interrupt 1
  59          {
  60   1                TH0 = 0x3C;    //设置初始值
  61   1          TL0 = 0xB0;
  62   1                      Time++;
  63   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =     57    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =      1    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
